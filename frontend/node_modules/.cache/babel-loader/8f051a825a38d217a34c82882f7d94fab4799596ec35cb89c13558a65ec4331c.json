{"ast":null,"code":"var _jsxFileName = \"/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/utils/providers/ShareContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useCallback } from 'react';\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { getSharedClass } from '../../services/admin/class';\nimport { useActiveClassroom } from './ActiveClassroomContext';\nimport { useBaseUrl } from './urlprovider';\nimport isAuthenticated from '../authentication';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShareContext = /*#__PURE__*/createContext();\nexport const ShareProvider = ({\n  children\n}) => {\n  _s();\n  const [activeShareClass, setActiveShareClass] = useState(null);\n  const {\n    activeClassroom\n  } = useActiveClassroom();\n  const baseURL = useBaseUrl();\n  const token = window.localStorage.getItem(\"token\");\n  const isAdmin = window.localStorage.getItem(\"admin\");\n  const setShareClass = useCallback(async () => {\n    if (activeClassroom.classroom_name !== undefined && isAuthenticated() && isAdmin) {\n      try {\n        const newClassId = await getSharedClass(baseURL, token, activeClassroom.classroom_name);\n        setActiveShareClass(newClassId);\n      } catch (error) {\n        console.error('Error fetching shared class:', error);\n      }\n    }\n  }, [activeClassroom, baseURL, token, isAdmin]);\n  useEffect(() => {\n    setShareClass();\n  }, [activeClassroom, baseURL, token, setShareClass]);\n  return /*#__PURE__*/_jsxDEV(ShareContext.Provider, {\n    value: {\n      activeShareClass,\n      setShareClass\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(ShareProvider, \"4uBl+xOCXnaeYiI9gH/zRMZeouM=\", false, function () {\n  return [useActiveClassroom, useBaseUrl];\n});\n_c = ShareProvider;\nexport const useShareContext = () => {\n  _s2();\n  return useContext(ShareContext);\n};\n_s2(useShareContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"ShareProvider\");","map":{"version":3,"names":["useCallback","createContext","useContext","useState","useEffect","getSharedClass","useActiveClassroom","useBaseUrl","isAuthenticated","jsxDEV","_jsxDEV","ShareContext","ShareProvider","children","_s","activeShareClass","setActiveShareClass","activeClassroom","baseURL","token","window","localStorage","getItem","isAdmin","setShareClass","classroom_name","undefined","newClassId","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useShareContext","_s2","$RefreshReg$"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/utils/providers/ShareContext.js"],"sourcesContent":["import { useCallback } from 'react';\n\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { getSharedClass } from '../../services/admin/class';\nimport { useActiveClassroom } from './ActiveClassroomContext';\nimport { useBaseUrl } from './urlprovider';\nimport isAuthenticated from '../authentication';\n\nconst ShareContext = createContext();\n\nexport const ShareProvider = ({ children }) => {\n  const [activeShareClass, setActiveShareClass] = useState(null);\n  const { activeClassroom } = useActiveClassroom();\n\n  const baseURL = useBaseUrl();\n  const token = window.localStorage.getItem(\"token\");\n  const isAdmin = window.localStorage.getItem(\"admin\");\n\n  const setShareClass = useCallback(\n    async () => {\n      if (activeClassroom.classroom_name !== undefined && isAuthenticated() && isAdmin) {\n        try {\n          const newClassId = await getSharedClass(baseURL, token, activeClassroom.classroom_name);\n          setActiveShareClass(newClassId);\n        } catch (error) {\n          console.error('Error fetching shared class:', error);\n        }\n      }\n    },\n    [activeClassroom, baseURL, token, isAdmin] \n  );\n\n  useEffect(() => {\n    setShareClass();\n  }, [activeClassroom, baseURL, token, setShareClass]);\n\n  return (\n    <ShareContext.Provider value={{ activeShareClass, setShareClass }}>\n      {children}\n    </ShareContext.Provider>\n  );\n};\n\nexport const useShareContext = () => {\n  return useContext(ShareContext);\n};"],"mappings":";;;AAAA,SAASA,WAAW,QAAQ,OAAO;AAEnC,SAASC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACtE,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,kBAAkB,QAAQ,0BAA0B;AAC7D,SAASC,UAAU,QAAQ,eAAe;AAC1C,OAAOC,eAAe,MAAM,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,YAAY,gBAAGV,aAAa,CAAC,CAAC;AAEpC,OAAO,MAAMW,aAAa,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM,CAACC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM;IAAEc;EAAgB,CAAC,GAAGX,kBAAkB,CAAC,CAAC;EAEhD,MAAMY,OAAO,GAAGX,UAAU,CAAC,CAAC;EAC5B,MAAMY,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAClD,MAAMC,OAAO,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAEpD,MAAME,aAAa,GAAGxB,WAAW,CAC/B,YAAY;IACV,IAAIiB,eAAe,CAACQ,cAAc,KAAKC,SAAS,IAAIlB,eAAe,CAAC,CAAC,IAAIe,OAAO,EAAE;MAChF,IAAI;QACF,MAAMI,UAAU,GAAG,MAAMtB,cAAc,CAACa,OAAO,EAAEC,KAAK,EAAEF,eAAe,CAACQ,cAAc,CAAC;QACvFT,mBAAmB,CAACW,UAAU,CAAC;MACjC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF;EACF,CAAC,EACD,CAACX,eAAe,EAAEC,OAAO,EAAEC,KAAK,EAAEI,OAAO,CAC3C,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACdoB,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACP,eAAe,EAAEC,OAAO,EAAEC,KAAK,EAAEK,aAAa,CAAC,CAAC;EAEpD,oBACEd,OAAA,CAACC,YAAY,CAACmB,QAAQ;IAACC,KAAK,EAAE;MAAEhB,gBAAgB;MAAES;IAAc,CAAE;IAAAX,QAAA,EAC/DA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAE5B,CAAC;AAACrB,EAAA,CA/BWF,aAAa;EAAA,QAEIN,kBAAkB,EAE9BC,UAAU;AAAA;AAAA6B,EAAA,GAJfxB,aAAa;AAiC1B,OAAO,MAAMyB,eAAe,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACnC,OAAOpC,UAAU,CAACS,YAAY,CAAC;AACjC,CAAC;AAAC2B,GAAA,CAFWD,eAAe;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}