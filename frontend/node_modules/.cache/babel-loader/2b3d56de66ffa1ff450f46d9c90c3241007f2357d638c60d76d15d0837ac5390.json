{"ast":null,"code":"var _jsxFileName = \"/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { BaseUrlProvider } from \"./utils/providers/urlprovider\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\nimport { getStudent } from './services/student/student';\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\nimport isStudentAuthenticated from \"./utils/authentication/studentAuthentication\";\nimport isAuthenticated from \"./utils/authentication/adminauth\";\nimport './styles/Main.css';\nimport './styles/color.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const BASE_FETCH_URL = \"http://localhost:8888\";\n  const navigate = useNavigate();\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n  const checkName = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      return user.name === null;\n    } catch (error) {\n      console.error(error);\n      return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n  const goToRoute = useCallback(async () => {\n    if (activeRoute === \"studentHome\") {\n      try {\n        const isNameAbsent = await checkName();\n        if (!isNameAbsent) {\n          navigate(\"/studentHome\");\n        } else {\n          navigate(\"/createStudentName\");\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkName]);\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"chooseLogin\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n  return /*#__PURE__*/_jsxDEV(BaseUrlProvider, {\n    baseUrl: BASE_FETCH_URL,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fullContainer centerFlex\",\n      children: activeRoute === \"adminHome\" ? /*#__PURE__*/_jsxDEV(AdminRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this) : activeRoute === \"studentHome\" ? /*#__PURE__*/_jsxDEV(StudentRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(LoginRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"seMVg2nKLX6YyFFykbyUybb3QqA=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useEffect","useNavigate","BaseUrlProvider","useActiveRoute","getStudent","LoginRoutes","AdminRoutes","StudentRoutes","isStudentAuthenticated","isAuthenticated","jsxDEV","_jsxDEV","App","_s","BASE_FETCH_URL","navigate","token","window","localStorage","getItem","adminStatus","username","checkName","user","name","error","console","goToRoute","activeRoute","isNameAbsent","setActiveRoute","baseUrl","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { BaseUrlProvider } from \"./utils/providers/urlprovider\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\n\nimport { getStudent } from './services/student/student'\n\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\n\nimport isStudentAuthenticated from \"./utils/authentication/studentAuthentication\";\nimport isAuthenticated from \"./utils/authentication/adminauth\";\n\nimport './styles/Main.css';\nimport './styles/color.css';\n\nfunction App() {\n  const BASE_FETCH_URL = \"http://localhost:8888\";\n\n  const navigate = useNavigate();\n\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n\n\n  const checkName = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      return user.name === null;\n    } catch (error) {\n        console.error(error);\n        return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n\n\n  const goToRoute = useCallback( async () => {\n    if(activeRoute === \"studentHome\" ) {\n      try {\n        const isNameAbsent = await checkName();\n        if (!isNameAbsent) {\n          navigate(\"/studentHome\");\n        } else {\n          navigate(\"/createStudentName\");\n        }\n      } catch (error) {\n          console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkName]);\n\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"chooseLogin\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n\n  return (\n    <BaseUrlProvider baseUrl={BASE_FETCH_URL}>\n        <div className=\"fullContainer centerFlex\">\n          {activeRoute === \"adminHome\" ? (\n            <AdminRoutes />\n          ) : activeRoute === \"studentHome\" ? (\n            <StudentRoutes />\n          ) : (\n            <LoginRoutes />\n          )}\n        </div>\n    </BaseUrlProvider>\n  );\n}\n\nexport default App;\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AACrD,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,SAASC,eAAe,QAAQ,+BAA+B;AAC/D,SAASC,cAAc,QAAQ,sCAAsC;AAErE,SAASC,UAAU,QAAQ,4BAA4B;AAEvD,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,aAAa,MAAM,wBAAwB;AAElD,OAAOC,sBAAsB,MAAM,8CAA8C;AACjF,OAAOC,eAAe,MAAM,kCAAkC;AAE9D,OAAO,mBAAmB;AAC1B,OAAO,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5B,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,cAAc,GAAG,uBAAuB;EAE9C,MAAMC,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9B,MAAMe,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAClD,MAAMC,WAAW,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACxD,MAAME,QAAQ,GAAGJ,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EAGxD,MAAMG,SAAS,GAAGvB,WAAW,CAAC,YAAY;IACxC,IAAI;MACF,MAAMwB,IAAI,GAAG,MAAMnB,UAAU,CAACU,cAAc,EAAEE,KAAK,EAAEK,QAAQ,CAAC;MAC9D,OAAOE,IAAI,CAACC,IAAI,KAAK,IAAI;IAC3B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,OAAO,KAAK;IAChB;EACF,CAAC,EAAE,CAACX,cAAc,EAAEE,KAAK,EAAEK,QAAQ,CAAC,CAAC;EAGrC,MAAMM,SAAS,GAAG5B,WAAW,CAAE,YAAY;IACzC,IAAG6B,WAAW,KAAK,aAAa,EAAG;MACjC,IAAI;QACF,MAAMC,YAAY,GAAG,MAAMP,SAAS,CAAC,CAAC;QACtC,IAAI,CAACO,YAAY,EAAE;UACjBd,QAAQ,CAAC,cAAc,CAAC;QAC1B,CAAC,MAAM;UACLA,QAAQ,CAAC,oBAAoB,CAAC;QAChC;MACF,CAAC,CAAC,OAAOU,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACxB;IACF,CAAC,MAAM;MACLV,QAAQ,CAAE,IAAGa,WAAY,EAAC,CAAC;IAC7B;EACF,CAAC,EAAE,CAACb,QAAQ,EAAEa,WAAW,EAAEN,SAAS,CAAC,CAAC;EAEtCtB,SAAS,CAAC,MAAM;IACd,IAAIoB,WAAW,KAAK,MAAM,IAAIX,eAAe,CAAC,CAAC,EAAE;MAC/CqB,cAAc,CAAC,WAAW,CAAC;IAC7B,CAAC,MAAM,IAAIV,WAAW,KAAK,OAAO,IAAIZ,sBAAsB,CAAC,CAAC,EAAE;MAC9DsB,cAAc,CAAC,aAAa,CAAC;IAC/B,CAAC,MAAM;MACLA,cAAc,CAAC,aAAa,CAAC;IAC/B;IACA;EACF,CAAC,EAAE,CAACV,WAAW,EAAEJ,KAAK,EAAEP,eAAe,CAAC,CAAC,EAAED,sBAAsB,CAAC,CAAC,CAAC,CAAC;EAErER,SAAS,CAAC,MAAM;IACd2B,SAAS,CAAC,CAAC;IACX;EACF,CAAC,EAAE,CAACC,WAAW,CAAC,CAAC;EAEjB,oBACEjB,OAAA,CAACT,eAAe;IAAC6B,OAAO,EAAEjB,cAAe;IAAAkB,QAAA,eACrCrB,OAAA;MAAKsB,SAAS,EAAC,0BAA0B;MAAAD,QAAA,EACtCJ,WAAW,KAAK,WAAW,gBAC1BjB,OAAA,CAACL,WAAW;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GACbT,WAAW,KAAK,aAAa,gBAC/BjB,OAAA,CAACJ,aAAa;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAEjB1B,OAAA,CAACN,WAAW;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IACf;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACO,CAAC;AAEtB;AAACxB,EAAA,CAnEQD,GAAG;EAAA,QAGOX,WAAW;AAAA;AAAAqC,EAAA,GAHrB1B,GAAG;AAqEZ,eAAeA,GAAG;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}