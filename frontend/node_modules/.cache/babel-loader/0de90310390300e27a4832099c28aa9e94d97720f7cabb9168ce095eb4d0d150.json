{"ast":null,"code":"var _jsxFileName = \"/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect } from \"react\";\nimport { BaseUrlProvider } from \"./utils/baseUrlContext\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getStudent } from \"./services/student\";\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\nimport isAuthenticated from \"./utils/authentication\";\nimport isStudentAuthenticated from \"./utils/studentAuthentication\";\nimport './css/Main.css';\nimport '';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const BASE_FETCH_URL = \"https://todo-6fsq.onrender.com\";\n  const {\n    activeRoute,\n    setActiveRoute\n  } = useActiveRoute();\n  const navigate = useNavigate();\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n  const checkName = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      return user.name === null;\n    } catch (error) {\n      console.error(error);\n      return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n  const goToRoute = useCallback(async () => {\n    if (activeRoute === \"studentHome\") {\n      try {\n        const isNameAbsent = await checkName();\n        if (!isNameAbsent) {\n          navigate(\"/studentHome\");\n        } else {\n          navigate(\"/createStudentName\");\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkName]);\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"chooseLogin\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n  return /*#__PURE__*/_jsxDEV(BaseUrlProvider, {\n    baseUrl: BASE_FETCH_URL,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fullContainer centerFlex\",\n      children: activeRoute === \"adminHome\" ? /*#__PURE__*/_jsxDEV(AdminRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this) : activeRoute === \"studentHome\" ? /*#__PURE__*/_jsxDEV(StudentRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(LoginRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Wu/AakqgrnjsB4+nR/nTu9lsCQY=\", false, function () {\n  return [useActiveRoute, useNavigate];\n});\n_c = App;\nexport default App;\n\"http://localhost:8888\";\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useEffect","BaseUrlProvider","useActiveRoute","useNavigate","getStudent","LoginRoutes","AdminRoutes","StudentRoutes","isAuthenticated","isStudentAuthenticated","jsxDEV","_jsxDEV","App","_s","BASE_FETCH_URL","activeRoute","setActiveRoute","navigate","token","window","localStorage","getItem","adminStatus","username","checkName","user","name","error","console","goToRoute","isNameAbsent","baseUrl","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport { BaseUrlProvider } from \"./utils/baseUrlContext\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getStudent } from \"./services/student\";\n\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\n\nimport isAuthenticated from \"./utils/authentication\";\nimport isStudentAuthenticated from \"./utils/studentAuthentication\";\n\nimport './css/Main.css'\nimport ''\n\nfunction App() {\n  const BASE_FETCH_URL = \"https://todo-6fsq.onrender.com\";\n  const { activeRoute, setActiveRoute } = useActiveRoute();\n\n  const navigate = useNavigate();\n\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n\n\n  const checkName = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      return user.name === null;\n    } catch (error) {\n        console.error(error);\n        return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n\n\n  const goToRoute = useCallback( async () => {\n    if(activeRoute === \"studentHome\" ) {\n      try {\n        const isNameAbsent = await checkName();\n        if (!isNameAbsent) {\n          navigate(\"/studentHome\");\n        } else {\n          navigate(\"/createStudentName\");\n        }\n      } catch (error) {\n          console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkName]);\n\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"chooseLogin\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n\n  return (\n    <BaseUrlProvider baseUrl={BASE_FETCH_URL}>\n        <div className=\"fullContainer centerFlex\">\n          {activeRoute === \"adminHome\" ? (\n            <AdminRoutes />\n          ) : activeRoute === \"studentHome\" ? (\n            <StudentRoutes />\n          ) : (\n            <LoginRoutes />\n          )}\n        </div>\n    </BaseUrlProvider>\n  );\n}\n\nexport default App;\n\n\"http://localhost:8888\""],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}