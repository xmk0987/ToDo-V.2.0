{"ast":null,"code":"var _jsxFileName = \"/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { BaseUrlProvider } from \"./utils/providers/urlprovider\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\nimport { getStudent } from './services/student/student';\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\nimport isStudentAuthenticated from \"./utils/authentication/studentAuthentication\";\nimport isAuthenticated from \"./utils/authentication/adminauth\";\nimport './styles/Main.css';\nimport './styles/color.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const BASE_FETCH_URL = \"http://localhost:8888\";\n  const {\n    activeRoute,\n    setActiveRoute\n  } = useActiveRoute();\n  const navigate = useNavigate();\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n  const checkUser = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      console.log(user);\n    } catch (error) {\n      return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n  const goToRoute = useCallback(async () => {\n    if (activeRoute === \"studentHome\") {\n      try {\n        const isMember = await checkUser();\n        if (!isMember) {\n          navigate(\"/\");\n        } else {\n          navigate(`/${activeRoute}`);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkUser]);\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"login\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n  return /*#__PURE__*/_jsxDEV(BaseUrlProvider, {\n    baseUrl: BASE_FETCH_URL,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"full-container \",\n      children: activeRoute === \"adminHome\" ? /*#__PURE__*/_jsxDEV(AdminRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this) : activeRoute === \"studentHome\" ? /*#__PURE__*/_jsxDEV(StudentRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this) : activeRoute === \"login\" ? /*#__PURE__*/_jsxDEV(LoginRoutes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"qYUs9rj8UZ/fnF5Ca4UBFsZysSI=\", false, function () {\n  return [useActiveRoute, useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useEffect","useNavigate","BaseUrlProvider","useActiveRoute","getStudent","LoginRoutes","AdminRoutes","StudentRoutes","isStudentAuthenticated","isAuthenticated","jsxDEV","_jsxDEV","App","_s","BASE_FETCH_URL","activeRoute","setActiveRoute","navigate","token","window","localStorage","getItem","adminStatus","username","checkUser","user","console","log","error","goToRoute","isMember","baseUrl","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { BaseUrlProvider } from \"./utils/providers/urlprovider\";\nimport { useActiveRoute } from \"./utils/providers/ActiveRouteContext\";\n\nimport { getStudent } from './services/student/student'\n\nimport LoginRoutes from \"./Routes/loginRoutes\";\nimport AdminRoutes from \"./Routes/adminRoutes\";\nimport StudentRoutes from \"./Routes/studentRoutes\";\n\nimport isStudentAuthenticated from \"./utils/authentication/studentAuthentication\";\nimport isAuthenticated from \"./utils/authentication/adminauth\";\n\nimport './styles/Main.css';\nimport './styles/color.css';\n\nfunction App() {\n  const BASE_FETCH_URL = \"http://localhost:8888\";\n  const { activeRoute, setActiveRoute } = useActiveRoute();\n\n  const navigate = useNavigate();\n\n  const token = window.localStorage.getItem(\"token\");\n  const adminStatus = window.localStorage.getItem(\"admin\");\n  const username = window.localStorage.getItem(\"username\");\n\n\n  const checkUser = useCallback(async () => {\n    try {\n      const user = await getStudent(BASE_FETCH_URL, token, username);\n      console.log(user);\n    } catch (error) {\n        return false;\n    }\n  }, [BASE_FETCH_URL, token, username]);\n\n\n  const goToRoute = useCallback( async () => {\n    if(activeRoute === \"studentHome\" ) {\n      try {\n        const isMember = await checkUser();\n        if (!isMember) {\n          navigate(\"/\");\n        } else {\n          navigate(`/${activeRoute}`);\n        }\n      } catch (error) {\n          console.error(error);\n      }\n    } else {\n      navigate(`/${activeRoute}`);\n    }\n  }, [navigate, activeRoute, checkUser]);\n\n  useEffect(() => {\n    if (adminStatus === \"true\" && isAuthenticated()) {\n      setActiveRoute(\"adminHome\");\n    } else if (adminStatus === \"false\" && isStudentAuthenticated()) {\n      setActiveRoute(\"studentHome\");\n    } else {\n      setActiveRoute(\"login\");\n    }\n    //eslint-disable-next-line\n  }, [adminStatus, token, isAuthenticated(), isStudentAuthenticated()]);\n\n  useEffect(() => {\n    goToRoute();\n    //eslint-disable-next-line\n  }, [activeRoute]);\n\n  return (\n    <BaseUrlProvider baseUrl={BASE_FETCH_URL}>\n        <div className=\"full-container \">\n          {activeRoute === \"adminHome\" ? (\n            <AdminRoutes />\n          ) : activeRoute === \"studentHome\" ? (\n            <StudentRoutes />\n          ) : (\n            activeRoute=== \"login\" ? (\n              <LoginRoutes />\n            ):\n            null\n          )}\n        </div>\n    </BaseUrlProvider>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}