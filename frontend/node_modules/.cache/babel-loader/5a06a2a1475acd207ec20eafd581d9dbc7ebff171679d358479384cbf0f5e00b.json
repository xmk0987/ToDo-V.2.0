{"ast":null,"code":"import axios from 'axios';\nimport CustomError from '../../utils/errors';\nconst studentLogin = async (baseURL, classroom_name, username) => {\n  try {\n    const response = await fetch(`${baseURL}/studentlogin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        classroom_name,\n        username\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    if (!response.ok) {\n      throw new CustomError();\n    }\n    window.localStorage.setItem(\"token\", data.token);\n    window.localStorage.setItem(\"username\", data.username);\n    window.localStorage.setItem(\"classroom_name\", data.classroom_name);\n    window.localStorage.setItem(\"admin\", data.admin);\n    return;\n  } catch (error) {\n    throw new CustomError(`${error.message}`);\n  }\n};\nconst getStudentTodos = async (baseURL, token, class_id, username) => {\n  if (class_id) {\n    try {\n      const response = await axios.get(`${baseURL}/getstudenttodos`, {\n        params: {\n          username,\n          class_id\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = response.data;\n      if (!response.status === 200) {\n        throw new CustomError(`${data.message}`, response.status);\n      }\n      return data;\n    } catch (error) {\n      throw new CustomError(`${error.message}`, error.status);\n    }\n  } else {\n    console.error(\"No class id\");\n  }\n};\nconst updateTodoComplete = async (baseURL, token, student_todo_id, completed) => {\n  try {\n    const updates = {\n      completed: completed\n    };\n    return await updateTodo(baseURL, token, student_todo_id, updates);\n  } catch (err) {\n    console.error('Error updating todo completion status:', err);\n    throw new CustomError(`Updating todo completion status failed: ${err.message}`);\n  }\n};\nconst updateTodo = async (baseURL, token, student_todo_id, updates) => {\n  try {\n    const response = await axios.put(`${baseURL}/updatestudenttodo`, {\n      student_todo_id: student_todo_id,\n      updates: updates\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.status === 200) {\n      throw new CustomError(`HTTP error! Status: ${response.status}`);\n    }\n    return;\n  } catch (err) {\n    console.error('Error updating todos:', err);\n    throw new CustomError(`Updating todos failed: ${err.message}`);\n  }\n};\nconst getStudents = async (baseURL, token, classroom_name) => {\n  try {\n    const response = await axios.get(`${baseURL}/getclassroomstudents`, {\n      params: {\n        classroom_name\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return data;\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\nconst deleteStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.delete(`${baseURL}/deletestudent`, {\n      params: {\n        username: username\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return;\n  } catch (err) {\n    console.error('Error deleting student:', err);\n    throw new CustomError(`Deleting student failed: ${err.message}`);\n  }\n};\nconst getStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.get(`${baseURL}/getstudent`, {\n      params: {\n        username\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return data;\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\nconst setName = async (baseURL, token, username, name) => {\n  try {\n    const response = await axios.put(`${baseURL}/setstudentname`, {\n      username,\n      name\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return;\n  } catch (err) {\n    console.error('Error setting name:', err);\n    throw new CustomError(`Setting name failed: ${err.message}`);\n  }\n};\nexport { studentLogin, getStudentTodos, updateTodoComplete, getStudents, deleteStudent, getStudent, setName };","map":{"version":3,"names":["axios","CustomError","studentLogin","baseURL","classroom_name","username","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","ok","window","localStorage","setItem","token","admin","error","message","getStudentTodos","class_id","get","params","status","updateTodoComplete","student_todo_id","completed","updates","updateTodo","err","put","getStudents","deleteStudent","delete","getStudent","setName","name"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/services/student/student.js"],"sourcesContent":["import axios from 'axios';\nimport CustomError from '../../utils/errors';\n\nconst studentLogin = async  (baseURL, classroom_name, username) => {\n  try {\n      const response = await fetch(`${baseURL}/studentlogin`, {\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ classroom_name, username }),\n      });\n\n      const data = await response.json();\n      console.log(data);\n\n      if (!response.ok) {\n        throw new CustomError()\n      }\n\n      window.localStorage.setItem(\"token\", data.token);\n      window.localStorage.setItem(\"username\", data.username);\n      window.localStorage.setItem(\"classroom_name\", data.classroom_name);\n      window.localStorage.setItem(\"admin\", data.admin);\n\n      return;\n      \n  } \n  catch (error) {\n      throw new CustomError(`${error.message}`);\n  }\n}\n\n\nconst getStudentTodos = async (baseURL, token, class_id, username) => {\n  if (class_id) {\n    try {\n      const response = await axios.get(`${baseURL}/getstudenttodos`, {\n        params: {\n          username,\n          class_id,\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = response.data;\n\n      if (!response.status === 200) {\n        throw new CustomError(`${data.message}`, response.status);\n      }\n\n      return data;\n\n    } catch (error) {\n      throw new CustomError(`${error.message}`, error.status);\n    }\n  } else {\n    console.error(\"No class id\");\n  }\n};\n\nconst updateTodoComplete = async (baseURL, token, student_todo_id, completed) => {\n  try {\n    const updates = { completed: completed };\n    return await updateTodo(baseURL, token, student_todo_id, updates);\n  } catch (err) {\n    console.error('Error updating todo completion status:', err);\n    throw new CustomError(`Updating todo completion status failed: ${err.message}`);\n  }\n};\n\nconst updateTodo = async (baseURL, token, student_todo_id, updates) => {\n  try {\n    const response = await axios.put(`${baseURL}/updatestudenttodo`, {\n      student_todo_id: student_todo_id,\n      updates: updates,\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.status === 200) {\n      throw new CustomError(`HTTP error! Status: ${response.status}`);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error updating todos:', err);\n    throw new CustomError(`Updating todos failed: ${err.message}`);\n  }\n};\n\nconst getStudents = async (baseURL, token, classroom_name) => {\n  try {\n    const response = await axios.get(`${baseURL}/getclassroomstudents`, {\n      params: {\n        classroom_name,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return data;\n\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\n\nconst deleteStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.delete(`${baseURL}/deletestudent`, {\n      params: {\n        username: username,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error deleting student:', err);\n    throw new CustomError(`Deleting student failed: ${err.message}`);\n  }\n};\n\nconst getStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.get(`${baseURL}/getstudent`, {\n      params: {\n        username,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return data;\n\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\n\nconst setName = async (baseURL, token, username, name) => {\n  try {\n    const response = await axios.put(`${baseURL}/setstudentname`, {\n      username,\n      name,\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error setting name:', err);\n    throw new CustomError(`Setting name failed: ${err.message}`);\n  }\n};\n\nexport {\n    studentLogin,\n    getStudentTodos,\n    updateTodoComplete,\n    getStudents,\n    deleteStudent,\n    getStudent,\n    setName\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}