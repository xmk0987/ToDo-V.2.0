{"ast":null,"code":"import axios from 'axios';\nimport CustomError from '../../utils/errors';\nconst studentLogin = async (baseURL, classroom_name, username) => {\n  try {\n    const response = await fetch(`${baseURL}/studentlogin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        classroom_name,\n        username\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    if (!response.ok) {\n      let errorMessage = 'Request failed';\n      if (Array.isArray(data.message) && data.message.length > 0) {\n        errorMessage = data.message[0].msg;\n      } else {\n        errorMessage = data.message;\n      }\n      throw new CustomError(`${errorMessage}`, response.status);\n    }\n    window.localStorage.setItem(\"token\", data.token);\n    window.localStorage.setItem(\"username\", data.username);\n    window.localStorage.setItem(\"classroom_name\", data.classroom_name);\n    window.localStorage.setItem(\"admin\", data.admin);\n    return;\n  } catch (error) {\n    throw new CustomError(`${error.message}`);\n  }\n};\nconst getStudentTodos = async (baseURL, token, class_id, username) => {\n  if (class_id) {\n    try {\n      const response = await axios.get(`${baseURL}/getstudenttodos`, {\n        params: {\n          username,\n          class_id\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = response.data;\n      if (!response.status === 200) {\n        throw new CustomError(`${data.message}`, response.status);\n      }\n      return data;\n    } catch (error) {\n      throw new CustomError(`${error.message}`, error.status);\n    }\n  } else {\n    console.error(\"No class id\");\n  }\n};\nconst updateTodoComplete = async (baseURL, token, student_todo_id, completed) => {\n  try {\n    const updates = {\n      completed: completed\n    };\n    return await updateTodo(baseURL, token, student_todo_id, updates);\n  } catch (err) {\n    console.error('Error updating todo completion status:', err);\n    throw new CustomError(`Updating todo completion status failed: ${err.message}`);\n  }\n};\nconst updateTodo = async (baseURL, token, student_todo_id, updates) => {\n  try {\n    const response = await axios.put(`${baseURL}/updatestudenttodo`, {\n      student_todo_id: student_todo_id,\n      updates: updates\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.status === 200) {\n      throw new CustomError(`HTTP error! Status: ${response.status}`);\n    }\n    return;\n  } catch (err) {\n    console.error('Error updating todos:', err);\n    throw new CustomError(`Updating todos failed: ${err.message}`);\n  }\n};\nconst getStudents = async (baseURL, token, classroom_name) => {\n  try {\n    const response = await axios.get(`${baseURL}/getclassroomstudents`, {\n      params: {\n        classroom_name\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return data;\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\nconst deleteStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.delete(`${baseURL}/deletestudent`, {\n      params: {\n        username: username\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return;\n  } catch (err) {\n    console.error('Error deleting student:', err);\n    throw new CustomError(`Deleting student failed: ${err.message}`);\n  }\n};\nconst getStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.get(`${baseURL}/getstudent`, {\n      params: {\n        username\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return data;\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\nconst setName = async (baseURL, token, username, name) => {\n  try {\n    const response = await axios.put(`${baseURL}/setstudentname`, {\n      username,\n      name\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.data;\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n    return;\n  } catch (err) {\n    console.error('Error setting name:', err);\n    throw new CustomError(`Setting name failed: ${err.message}`);\n  }\n};\nexport { studentLogin, getStudentTodos, updateTodoComplete, getStudents, deleteStudent, getStudent, setName };","map":{"version":3,"names":["axios","CustomError","studentLogin","baseURL","classroom_name","username","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","ok","errorMessage","Array","isArray","message","length","msg","status","window","localStorage","setItem","token","admin","error","getStudentTodos","class_id","get","params","updateTodoComplete","student_todo_id","completed","updates","updateTodo","err","put","getStudents","deleteStudent","delete","getStudent","setName","name"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/services/student/student.js"],"sourcesContent":["import axios from 'axios';\nimport CustomError from '../../utils/errors';\n\nconst studentLogin = async  (baseURL, classroom_name, username) => {\n  try {\n      const response = await fetch(`${baseURL}/studentlogin`, {\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ classroom_name, username }),\n      });\n\n      const data = await response.json();\n      console.log(data);\n\n      if (!response.ok) {\n        let errorMessage = 'Request failed';\n        if (Array.isArray(data.message) && data.message.length > 0) {\n          errorMessage = data.message[0].msg;\n        } else {\n          errorMessage = data.message;\n        }\n        throw new CustomError(`${errorMessage}`, response.status);\n      }\n\n      window.localStorage.setItem(\"token\", data.token);\n      window.localStorage.setItem(\"username\", data.username);\n      window.localStorage.setItem(\"classroom_name\", data.classroom_name);\n      window.localStorage.setItem(\"admin\", data.admin);\n\n      return;\n      \n  } \n  catch (error) {\n      throw new CustomError(`${error.message}`);\n  }\n}\n\n\nconst getStudentTodos = async (baseURL, token, class_id, username) => {\n  if (class_id) {\n    try {\n      const response = await axios.get(`${baseURL}/getstudenttodos`, {\n        params: {\n          username,\n          class_id,\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = response.data;\n\n      if (!response.status === 200) {\n        throw new CustomError(`${data.message}`, response.status);\n      }\n\n      return data;\n\n    } catch (error) {\n      throw new CustomError(`${error.message}`, error.status);\n    }\n  } else {\n    console.error(\"No class id\");\n  }\n};\n\nconst updateTodoComplete = async (baseURL, token, student_todo_id, completed) => {\n  try {\n    const updates = { completed: completed };\n    return await updateTodo(baseURL, token, student_todo_id, updates);\n  } catch (err) {\n    console.error('Error updating todo completion status:', err);\n    throw new CustomError(`Updating todo completion status failed: ${err.message}`);\n  }\n};\n\nconst updateTodo = async (baseURL, token, student_todo_id, updates) => {\n  try {\n    const response = await axios.put(`${baseURL}/updatestudenttodo`, {\n      student_todo_id: student_todo_id,\n      updates: updates,\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.status === 200) {\n      throw new CustomError(`HTTP error! Status: ${response.status}`);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error updating todos:', err);\n    throw new CustomError(`Updating todos failed: ${err.message}`);\n  }\n};\n\nconst getStudents = async (baseURL, token, classroom_name) => {\n  try {\n    const response = await axios.get(`${baseURL}/getclassroomstudents`, {\n      params: {\n        classroom_name,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return data;\n\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\n\nconst deleteStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.delete(`${baseURL}/deletestudent`, {\n      params: {\n        username: username,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error deleting student:', err);\n    throw new CustomError(`Deleting student failed: ${err.message}`);\n  }\n};\n\nconst getStudent = async (baseURL, token, username) => {\n  try {\n    const response = await axios.get(`${baseURL}/getstudent`, {\n      params: {\n        username,\n      },\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return data;\n\n  } catch (err) {\n    console.error('Error getting students:', err);\n    throw new CustomError(`Getting students failed: ${err.message}`);\n  }\n};\n\nconst setName = async (baseURL, token, username, name) => {\n  try {\n    const response = await axios.put(`${baseURL}/setstudentname`, {\n      username,\n      name,\n    }, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const data = response.data;\n\n    if (!response.status === 200) {\n      throw new CustomError(`${data.message}`, response.status);\n    }\n\n    return;\n\n  } catch (err) {\n    console.error('Error setting name:', err);\n    throw new CustomError(`Setting name failed: ${err.message}`);\n  }\n};\n\nexport {\n    studentLogin,\n    getStudentTodos,\n    updateTodoComplete,\n    getStudents,\n    deleteStudent,\n    getStudent,\n    setName\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}