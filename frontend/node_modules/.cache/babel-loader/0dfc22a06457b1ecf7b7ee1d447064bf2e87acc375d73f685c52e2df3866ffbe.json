{"ast":null,"code":"var _jsxFileName = \"/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/utils/providers/activeclassroomprovider.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { getActiveClassroom } from '../../services/classroom';\nimport { useBaseUrl } from '../baseUrlContext';\nimport { useNavigate } from 'react-router-dom';\nimport isAuthenticated from '../authentication';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ActiveClassroomContext = /*#__PURE__*/createContext();\nexport const ActiveClassroomProvider = ({\n  children\n}) => {\n  _s();\n  const [activeClassroom, setActiveClassroom] = useState({});\n  const navigate = useNavigate();\n  const baseURL = useBaseUrl();\n  const token = window.localStorage.getItem(\"token\");\n  const username = window.localStorage.getItem(\"username\");\n  const isAdmin = window.localStorage.getItem(\"admin\");\n  useEffect(() => {\n    const fetchActiveClassroom = async () => {\n      try {\n        if (isAuthenticated() && isAdmin) {\n          const result = await getActiveClassroom(baseURL, token, username);\n          if (!result) {\n            navigate(\"/firstClassroom\");\n          } else {\n            setActiveClassroom(result);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching active classroom:', error);\n      }\n    };\n    fetchActiveClassroom();\n  }, [baseURL, token, username, navigate, setActiveClassroom, isAdmin]);\n  return /*#__PURE__*/_jsxDEV(ActiveClassroomContext.Provider, {\n    value: {\n      activeClassroom,\n      setActiveClassroom\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(ActiveClassroomProvider, \"bxeYUBfLxRGV5j3XoPYPWcOnxCU=\", false, function () {\n  return [useNavigate, useBaseUrl];\n});\n_c = ActiveClassroomProvider;\nexport const useActiveClassroom = () => {\n  _s2();\n  const context = useContext(ActiveClassroomContext);\n  if (!context) {\n    throw new Error('useActiveClassroom must be used within an ActiveClassroomProvider');\n  }\n  return context;\n};\n_s2(useActiveClassroom, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ActiveClassroomProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","getActiveClassroom","useBaseUrl","useNavigate","isAuthenticated","jsxDEV","_jsxDEV","ActiveClassroomContext","ActiveClassroomProvider","children","_s","activeClassroom","setActiveClassroom","navigate","baseURL","token","window","localStorage","getItem","username","isAdmin","fetchActiveClassroom","result","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useActiveClassroom","_s2","context","Error","$RefreshReg$"],"sources":["/Users/onnivitikainen/Desktop/online-todolist-v2/frontend/src/utils/providers/activeclassroomprovider.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { getActiveClassroom } from '../../services/classroom';\nimport { useBaseUrl } from '../baseUrlContext';\nimport { useNavigate } from 'react-router-dom';\nimport isAuthenticated from '../authentication';\n\n\nconst ActiveClassroomContext = createContext();\n\nexport const ActiveClassroomProvider = ({ children }) => {\n  const [activeClassroom, setActiveClassroom] = useState({});\n  const navigate = useNavigate();\n\n  const baseURL = useBaseUrl();\n  const token = window.localStorage.getItem(\"token\");\n  const username = window.localStorage.getItem(\"username\");\n  const isAdmin = window.localStorage.getItem(\"admin\");\n\n  useEffect(() => {\n    const fetchActiveClassroom = async () => {\n      try {\n        if(isAuthenticated() && isAdmin){\n          const result = await getActiveClassroom(baseURL, token, username);\n          if(!result) {\n            navigate(\"/firstClassroom\");\n          } else {\n            setActiveClassroom(result);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching active classroom:', error);\n      }\n    };\n  \n    fetchActiveClassroom();\n  }, [baseURL, token, username, navigate, setActiveClassroom, isAdmin]);\n\n  return (\n    <ActiveClassroomContext.Provider value={{ activeClassroom, setActiveClassroom }}>\n      {children}\n    </ActiveClassroomContext.Provider>\n  );\n};\n\nexport const useActiveClassroom = () => {\n  const context = useContext(ActiveClassroomContext);\n  if (!context) {\n    throw new Error('useActiveClassroom must be used within an ActiveClassroomProvider');\n  }\n  return context;\n};"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,kBAAkB,QAAQ,0BAA0B;AAC7D,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,eAAe,MAAM,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGhD,MAAMC,sBAAsB,gBAAGV,aAAa,CAAC,CAAC;AAE9C,OAAO,MAAMW,uBAAuB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACvD,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1D,MAAMc,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9B,MAAMW,OAAO,GAAGZ,UAAU,CAAC,CAAC;EAC5B,MAAMa,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAClD,MAAMC,QAAQ,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACxD,MAAME,OAAO,GAAGJ,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAEpDlB,SAAS,CAAC,MAAM;IACd,MAAMqB,oBAAoB,GAAG,MAAAA,CAAA,KAAY;MACvC,IAAI;QACF,IAAGjB,eAAe,CAAC,CAAC,IAAIgB,OAAO,EAAC;UAC9B,MAAME,MAAM,GAAG,MAAMrB,kBAAkB,CAACa,OAAO,EAAEC,KAAK,EAAEI,QAAQ,CAAC;UACjE,IAAG,CAACG,MAAM,EAAE;YACVT,QAAQ,CAAC,iBAAiB,CAAC;UAC7B,CAAC,MAAM;YACLD,kBAAkB,CAACU,MAAM,CAAC;UAC5B;QACF;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MAC1D;IACF,CAAC;IAEDF,oBAAoB,CAAC,CAAC;EACxB,CAAC,EAAE,CAACP,OAAO,EAAEC,KAAK,EAAEI,QAAQ,EAAEN,QAAQ,EAAED,kBAAkB,EAAEQ,OAAO,CAAC,CAAC;EAErE,oBACEd,OAAA,CAACC,sBAAsB,CAACkB,QAAQ;IAACC,KAAK,EAAE;MAAEf,eAAe;MAAEC;IAAmB,CAAE;IAAAH,QAAA,EAC7EA;EAAQ;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACsB,CAAC;AAEtC,CAAC;AAACpB,EAAA,CAjCWF,uBAAuB;EAAA,QAEjBL,WAAW,EAEZD,UAAU;AAAA;AAAA6B,EAAA,GAJfvB,uBAAuB;AAmCpC,OAAO,MAAMwB,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACtC,MAAMC,OAAO,GAAGpC,UAAU,CAACS,sBAAsB,CAAC;EAClD,IAAI,CAAC2B,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,mEAAmE,CAAC;EACtF;EACA,OAAOD,OAAO;AAChB,CAAC;AAACD,GAAA,CANWD,kBAAkB;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}